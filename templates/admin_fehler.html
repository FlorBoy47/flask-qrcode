<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Admin: FehlerÃ¼bersicht</title>
  <style>
    .fehler-offen {
      border: 2px solid red;
      padding: 10px;
      margin: 10px 0;
      background-color: #ffe5e5;
    }
    .fehler-erledigt {
      border: 2px solid green;
      padding: 10px;
      margin: 10px 0;
      background-color: #e5ffe5;
    }
  </style>
</head>
<body>
<h1>Admin: FehlerÃ¼bersicht</h1>

{% for fehler in fehlerliste %}
<div class="{% if fehler.erledigt %}fehler-erledigt{% else %}fehler-offen{% endif %}">
  <p><strong>GerÃ¤t:</strong> {{ fehler.geraet.name }}</p>
  <p><strong>Gemeldet von:</strong> {{ fehler.user }}</p>
  <p><strong>Datum:</strong> {{ fehler.erstellt_am.strftime('%d.%m.%Y %H:%M') }}</p>
  <p><strong>Beschreibung:</strong> {{ fehler.beschreibung }}</p>

  {% if fehler.erledigt %}
  <p><strong>âœ… Erledigt am:</strong> {{ fehler.erledigt_am.strftime('%d.%m.%Y %H:%M') }}</p>
  {% if fehler.kommentar_admin %}
  <p><strong>Admin-Kommentar:</strong> {{ fehler.kommentar_admin }}</p>
  {% endif %}
  {% else %}
  <form method="POST">
    <input type="hidden" name="fehler_id" value="{{ fehler.id }}">
    <label for="kommentar">Kommentar zur Erledigung:</label><br>
    <textarea name="kommentar" rows="3" cols="50"></textarea><br>
    <button type="submit">âœ… Als erledigt markieren</button>
  </form>
  {% endif %}
</div>
{% else %}
<p>Keine Fehler vorhanden.</p>
{% endfor %}

<br>
<a href="{{ url_for('index') }}">ğŸ”™ ZurÃ¼ck zur Ãœbersicht</a>
</body>
</html>
